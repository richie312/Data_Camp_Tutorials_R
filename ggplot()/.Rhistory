train_indices<-1:round(0.7*n)
train<-shuffled[train_indices,]
test_indices<-(round(0.7*n)+1):n
test<-shuffled[test_indices,]
str(train)
str(test)
typeof(tricky_list[[2]])
library(purrr)
list_of_results <- list(
list(a=1, b="A")
list(a=2, b="C")
list(a = 3, b="C")
)
map_dbl(list_of_results, function(x) x[["a"]])  ## An anonymous function
map_dbl(list_of_results, "a")
list_of_results <- list(
list(a=1, b="A")
list(a=2, b="C")
list_of_results <- list(
list(a=1, b="A"),
list(a=2, b="C"),
list(a = 3, b="C")
)
map_dbl(list_of_results, function(x) x[["a"]])  ## An anonymous function
map(df,~sum(is.na(.)))
library(purrr)
list_of_results <- list(
list(a=1, b="A"),
list(a=2, b="C"),
list(a = 3, b="C")
)
map_dbl(list_of_results, function(x) x[["a"]])  ## An anonymous function
map_dbl(list_of_results, "a") ## Shortcut: string Subsetting
map_dbl(list_of_results, 1) ## Shortcut integer subsetting
library(purrr)
list_of_results <- list(
list(a=1, b="A"),
list(a=2, b="C"),
list(a = 3, b="C")
)
map_dbl(list_of_results, function(x) x[["a"]])  ## An anonymous function
map_dbl(list_of_results, "a") ## Shortcut: string Subsetting
map_dbl(list_of_results, 1) ## Shortcut integer subsetting
library(purrr)
list_of_results <- list(
list(a=1, b="A"),
list(a=2, b="C"),
list(a = 3, b="C")
)
map_dbl(list_of_results, function(x) x[["a"]])  ## An anonymous function
map_dbl(list_of_results, "a") ## Shortcut: string Subsetting
map_dbl(list_of_results, 2) ## Shortcut integer subsetting
# Define models (don't change)
models <- mtcars %>%
split(mtcars$cyl) %>%
map(~ lm(mpg ~ wt, data = .))
# Rewrite to be a single command using pipes
summaries <- models%>%map(summary)
summaries%>%map_dbl("r.squared")
http://asdfasdasdkfjlda
safely(readLines("http://asdfasdasdkfjlda"))
library(purrr)
safely(readLines("http://asdfasdasdkfjlda"))
# Define list of functions
f <- list(Normal = "rnorm", Uniform = "runif", Exp = "rexp")
# Define params
params <- list(
Normal = list(mean = 10),
Uniform = list(min = 0, max = 5),
Exp = list(rate = 5)
)
# Assign the simulated samples to sims
sims<- invoke_map(f, params, n = 50)
# Use walk() to make a histogram of each element in sims
walk(sims, hist)
?walk2()
# Turn this snippet into find_breaks()
find_breaks<-function(x){
rng <- range(x, na.rm = TRUE)
seq(rng[1], rng[2], length.out = 30)
}
# Call find_breaks() on sims[[1]]
find_breaks(sims[[1]])
## Nice breaks for All,
# Use map() to iterate find_breaks() over sims: nice_breaks
nice_breaks<- map(sims, find_breaks)
# Use nice_breaks as the second argument to walk2()
walk2(sims,nice_breaks,hist)
# Increase sample size to 1000
sims <- invoke_map(f, params, n = 1000)
# Compute nice_breaks (don't change this)
nice_breaks <- map(sims, find_breaks)
# Create a vector nice_titles
nice_titles= c("Normal(10,1)","Uniform(0,5)","Exp(5)")
# Use pwalk() instead of walk2()
pwalk(list(x = sims, breaks = nice_breaks, main = nice_titles), hist, xlab = "")
# Pipe this along to map(), using summary() as .f
sims %>%
walk(hist) %>%map(summary)
df <- data.frame(
a = 1L,
b = 1.5,
y = Sys.time(),
z = ordered(1)
)
A <- sapply(df[1:4], class)
B <- sapply(df[3:4], class)
Class(A)
df <- data.frame(
a = 1L,
b = 1.5,
y = Sys.time(),
z = ordered(1)
)
A <- sapply(df[1:4], class)
B <- sapply(df[3:4], class)
class(A)
class(B)
library(stats)
?rpart()
library(rpart)
?rpart()
library(rpart.plot)
?rpart.plot()
library(ipred)
install.packages("ipred")
library(ipred)
![Bernoulli_Deviance](D:/Documents/R_Projects/Data_Camp_Tutorials/ML_Tree/bernoulli_deviance.JPG)
![Early_Stopping](D:/Documents/R_Projects/Data_Camp_Tutorials/ML_Tree/early_stopping.JPG)
![GBM_plot1](D:/Documents/R_Projects/Data_Camp_Tutorials/ML_Tree/gbm_plot1.JPG)
plot(mtcars$wt, mtcars$mpg, col = mtcars$cyl)
mtcars$fcyl <- as.factor(mtcars$cyl)
plot(mtcars$wt, mtcars$mpg, col = mtcars$fcyl)
mtcars
library(ggplot2)
# Convert cyl to factor (don't need to change)
mtcars$cyl <- as.factor(mtcars$cyl)
# Example from base R (don't need to change)
plot(mtcars$wt, mtcars$mpg, col = mtcars$cyl)
abline(lm(mpg ~ wt, data = mtcars), lty = 2)
lapply(mtcars$cyl, function(x) {
abline(lm(mpg ~ wt, mtcars, subset = (cyl == x)), col = x)
})
legend(x = 5, y = 33, legend = levels(mtcars$cyl),
col = 1:3, pch = 1, bty = "n")
# Plot 1: add geom_point() to this command to create a scatter plot
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point() # Fill in using instructions Plot 1
# Plot 2: include the lines of the linear models, per cyl
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point()+ # Copy from Plot 1
geom_smooth(method = "lm", se = FALSE)   # Fill in using instructions Plot 2
# Plot 3: include a lm for the entire dataset in its whole
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point() + # Copy from Plot 2
geom_smooth(method = "lm", se = FALSE) + # Copy from Plot 2
geom_smooth(aes(group = 1), method = "lm",se =FALSE,linetype = 2)  # Fill in using instructions Plot 3
iris
iris.wide
iris2
iris.tidy
library(tidyverse)
install.packages("tidyverse")
library(tidyverse)
library(tidy)
install.package("tidy")
install.packages("tidy")
iris.tidy
# 1 - Map mpg to x and cyl to y
ggplot(mtcars, aes(x = mpg, y = cyl)) +
geom_point()
# 2 - Reverse: Map cyl to x and mpg to y
ggplot(mtcars, aes(x = cyl, y = mpg)) +
geom_point()
# 3 - Map wt to x, mpg to y and cyl to col
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point()
# 4 - Change shape and size of the points in the above plot
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point(shape = 1, size =4)
# am and cyl are factors, wt is numeric
class(mtcars$am)
class(mtcars$cyl)
class(mtcars$wt)
# From the previous exercise
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl)) +
geom_point(shape = 1, size = 4)
# 1 - Map cyl to fill
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl)) +
geom_point(shape = 1, size = 4)
# 2 - Change shape and alpha of the points in the above plot
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl)) +
geom_point(shape = 21, size = 4, alpha = 0.6)
# 3 - Map am to col in the above plot
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl, col = am)) +
geom_point(shape = 21, size = 4, alpha = 0.6)
# Map cyl to size
ggplot(mtcars, aes(x = wt, y = mpg,size = cyl))+geom_point()
# Map cyl to alpha
ggplot(mtcars, aes(x = wt, y = mpg,alpha = cyl))+geom_point()
# Map cyl to shape
ggplot(mtcars, aes(x = wt, y = mpg,shape = cyl))+geom_point()
# Map cyl to label
ggplot(mtcars, aes(x = wt, y = mpg, label = cyl))+geom_point()+geom_text()
# Define a hexadecimal color
my_color <- "#4ABEFF"
# 1 - First scatter plot, with col aesthetic:
ggplot(mtcars, aes(x =wt, y = mpg, col = cyl))+geom_point(col = my_color)
# 2 - Plot 1, but set col attributes in geom layer:
ggplot(mtcars, aes(x =wt, y = mpg, col = cyl))+geom_point(col = my_color)
# 3 - Plot 2, with fill instead of col aesthetic, plut shape and size attributes in geom layer.
ggplot(mtcars, aes(x =wt, y = mpg, fill = cyl))+geom_point(col = my_color, size = 10, shape = 23)
# Expand to draw points with alpha 0.5
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl))+geom_point(alpha = 0.5)
# Expand to draw points with shape 24 and color yellow
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl)) +geom_point(shape = 24, col = "yellow")
# Expand to draw text with label rownames(mtcars) and color red
ggplot(mtcars, aes(x = wt, y = mpg, fill = cyl))+geom_text(aes(label = rownames(mtcars)), col ="red")
# Map mpg onto x, qsec onto y and factor(cyl) onto col
ggplot(mtcars, aes(x= mpg, y = qsec, col = factor(cyl)))+geom_point()
# Add mapping: factor(am) onto shape
ggplot(mtcars, aes(x= mpg, y = qsec, col = factor(cyl),shape=factor(am)))+geom_point()
# Add mapping: (hp/wt) onto size
ggplot(mtcars, aes(x= mpg, y = qsec, col = factor(cyl),shape=factor(am),size = (hp/wt)))+geom_point()
# The base layer, cyl.am, is available for you
# Add geom (position = "stack" by default)
cyl.am +
geom_bar()
cycl.am<- ggplot(mtcars, aes(x = cyl, y = am))
# The base layer, cyl.am, is available for you
# Add geom (position = "stack" by default)
cycl.am<- ggplot(mtcars, aes(x = cyl, y = am))
cyl.am +
geom_bar()
# The base layer, cyl.am, is available for you
# Add geom (position = "stack" by default)
cyl.am<- ggplot(mtcars, aes(x = cyl, y = am))
cyl.am +
geom_bar()
cyl.am +
geom_bar(position = "fill")
cyl.am<- ggplot(mtcars, aes(x = cyl, y = factor(am))
cyl.am<- ggplot(mtcars, aes(x = cyl, y = factor(am))
cyl.am +
geom_bar()
# 1 - Create jittered plot of mtcars, mpg onto x, 0 onto y
ggplot(mtcars, aes(x = mpg, y = 0)) +
geom_jitter()
# 2 - Add function to change y axis limits
ggplot(mtcars, aes(x = mpg, y = 0)) +
geom_jitter()+scale_y_continuous(limits = c(-2,2))
# Basic scatter plot: wt on x-axis and mpg on y-axis; map cyl to col
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl))+geom_point(size = 4)
# Hollow circles - an improvement
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl))+geom_point(size = 4, shape = 1)
# Add transparency - very nice
ggplot(mtcars, aes(x = wt, y = mpg, col = cyl))+geom_point(size = 4,alpha = 0.6)
diamonsa
diamonds
# Scatter plot: carat (x), price (y), clarity (color)
ggplot(diamonds, aes(x = carat, y = price, color= clarity))+ geom_point()
# Adjust for overplotting
ggplot(diamonds, aes(x = carat, y = price, color = clarity))+ geom_point(alpha = 0.5)
# Scatter plot: clarity (x), carat (y), price (color)
ggplot(diamonds, aes(x = clarity, y = carat, color = price))+ geom_point(alpha = 0.5)
# Dot plot with jittering
ggplot(diamonds, aes(x = clarity, y = carat, color = price))+ geom_point(alpha = 0.5, position = "jitter")
library(ggplot2)
# Shown in the viewer:
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_point()
# Solutions:
# 1 - With geom_jitter()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_jitter()
# 2 - Set width in geom_jitter()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_jitter(width = 0.1)
# 3 - Set position = position_jitter() in geom_point() ()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_point(position = position_jitter(0.1))
library(ggplot2)
# Shown in the viewer:
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_point()
# Solutions:
# 1 - With geom_jitter()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_jitter()
# 2 - Set width in geom_jitter()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_jitter(width = 0.1)
# 3 - Set position = position_jitter() in geom_point() ()
ggplot(mtcars, aes(x = cyl, y = wt)) +
geom_point(position = position_jitter(0.1))
vocab
install.packages("vocab")
install.packages("Vocab")
library(datasets)
vocab
Vocab
datasets
?datasets()
datasets("Vocab")
data(Vocab)
Vocab = read.csv("D:\Documents\R_Projects\Data_Camp_Tutorials\ggplot()\Vocab.csv", stringAsFactors = FALSE)
getwd()
Vocab = read.csv(D:\Documents\R_Projects\Data_Camp_Tutorials\ggplot()\Vocab.csv, stringAsFactors = FALSE)
Vocab = read.csv(D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()/Vocab.csv, stringAsFactors = FALSE)
getwd()
setwd(D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot())
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
Vocab = read.csv("Vocab.csv"", stringAsFactors = FALSE)
Vocab = read.csv("Vocab.csv"", stringAsFactors = FALSE)
Vocab
Vocab = read.csv("Vocab.csv", stringAsFactors = FALSE)
Vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
head(Vocab)
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
head(Vocab)
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
# Examine the structure of Vocab
str(Vocab)
# Basic scatter plot of vocabulary (y) against education (x). Use geom_point()
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_point()
# Use geom_jitter() instead of geom_point()
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter()
# Using the above plotting command, set alpha to a very low 0.2
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter(alpha = 0.2)
# Using the above plotting command, set the shape to 1
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter(alpha = 0.2, shape = 1)
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
# Basic scatter plot of vocabulary (y) against education (x). Use geom_point()
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_point()
# Use geom_jitter() instead of geom_point()
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter()
# Using the above plotting command, set alpha to a very low 0.2
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter(alpha = 0.2)
# Using the above plotting command, set the shape to 1
ggplot(Vocab, aes(x = education, y = vocabulary))+geom_jitter(alpha = 0.2, shape = 1)
# 1 - Make a univariate histogram
ggplot(mtcars, aes(x = mpg)) +
geom_histogram()
# 2 - Plot 1, plus set binwidth to 1 in the geom layer
ggplot(mtcars, aes(x = mpg)) +
geom_histogram(binwidth = 1)
# 3 - Plot 2, plus MAP ..density.. to the y aesthetic (i.e. in a second aes() function)
ggplot(mtcars, aes(x = mpg)) +
geom_histogram(aes(y = ..density..),binwidth = 1)
# 4 - plot 3, plus SET the fill attribute to "#377EB8"
ggplot(mtcars, aes(x = mpg)) +
geom_histogram(aes(y = ..density..),binwidth = 1, fill = "#377EB8")
# Draw a bar plot of cyl, filled according to am
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar()
# Change the position argument to stack
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "stack")
# Change the position argument to fill
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "fill")
# Change the position argument to dodge
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
# 1 - The last plot form the previous exercise
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
# 2 - Define posn_d with position_dodge()
posn_d <- position_dodge(width = 0.2)
# 3 - Change the position argument to posn_d
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = posn_d)
# 4 - Use posn_d as position and adjust alpha to 0.6
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = posn_d, alpha = 0.6)
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
# A basic histogram, add coloring defined by cyl
ggplot(mtcars, aes(mpg, fill = cyl)) +
geom_histogram(binwidth = 1)
# Change position to identity
ggplot(mtcars, aes(mpg, fill = cyl)) +
geom_histogram(binwidth = 1, position = "identity")
# Change geom to freqpoly (position is identity by default)
ggplot(mtcars, aes(mpg, col = cyl)) +
geom_histogram(binwidth = 1, position = "identity")+
geom_freqpoly(binwidth = 1)
# 1 - The last plot form the previous exercise
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = "dodge")
# 2 - Define posn_d with position_dodge()
posn_d <- position_dodge(width = 0.2)
# 3 - Change the position argument to posn_d
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = posn_d)
# 4 - Use posn_d as position and adjust alpha to 0.6
ggplot(mtcars, aes(x = cyl, fill = am)) +
geom_bar(position = posn_d, alpha = 0.6)
# A basic histogram, add coloring defined by cyl
ggplot(mtcars, aes(mpg, fill = cyl)) +
geom_histogram(binwidth = 1)
# Change position to identity
ggplot(mtcars, aes(mpg, fill = cyl)) +
geom_histogram(binwidth = 1, position = "identity")
# Change geom to freqpoly (position is identity by default)
ggplot(mtcars, aes(mpg, col = cyl)) +
geom_histogram(binwidth = 1, position = "identity")+
geom_freqpoly(binwidth = 1)
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
# Use the default brewed color palette
ggplot(mtcars, aes(x = education, fill = vocabulary)) +
geom_bar(postion = "fill") +
scale_fill_brewer()
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
# Use the default brewed color palette
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(postion = "fill") +
scale_fill_brewer()
setwd("D:/Documents/R_Projects/Data_Camp_Tutorials/ggplot()")
vocab = read.csv("Vocab.csv", stringsAsFactors = FALSE)
Vocab = vocab[-1]
# Use the default brewed color palette
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_brewer()
head(Vocab)
nrow(Vocab)
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_brewer()
# Final plot of last exercise
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_brewer()
# Definition of a set of blue colors
blues <- brewer.pal(9, "Blues") # from the RColorBrewer package
library(RColorBrewer)
## Load the necessary packages
library(RColorBrewer)
# Final plot of last exercise
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_brewer()
# Definition of a set of blue colors
blues <- brewer.pal(9, "Blues") # from the RColorBrewer package
# 1 - Make a color range using colorRampPalette() and the set of blues
blue_range<- colorRampPalette(blues)
# 2 - Use blue_range to adjust the color of the bars, use scale_fill_manual()
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_manual(values = blue_range(11))
## Load the necessary packages
library(RColorBrewer)
# Final plot of last exercise
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar(position = "fill") +
scale_fill_brewer()
# Definition of a set of blue colors
blues <- brewer.pal(9, "Blues") # from the RColorBrewer package
# 1 - Make a color range using colorRampPalette() and the set of blues
blue_range<- colorRampPalette(blues)
# 2 - Use blue_range to adjust the color of the bars, use scale_fill_manual()
ggplot(Vocab, aes(x = education, fill = vocabulary)) +
geom_bar() +
scale_fill_manual(values = blue_range(11))
# 1 - Basic histogram plot command
ggplot(mtcars, aes(mpg)) +
geom_histogram(binwidth = 1)
# 2 - Plot 1, Expand aesthetics: am onto fill
ggplot(mtcars, aes(mpg, fill = am)) +
geom_histogram(binwidth = 1)
# 3 - Plot 2, change position = "dodge"
ggplot(mtcars, aes(mpg, fill = am)) +
geom_histogram(binwidth = 1, position = "dodge")
# 4 - Plot 3, change position = "fill"
ggplot(mtcars, aes(mpg, fill = am)) +
geom_histogram(binwidth = 1, position = "fill")
# 5 - Plot 4, plus change position = "identity" and alpha = 0.4
ggplot(mtcars, aes(mpg, fill = am)) +
geom_histogram(binwidth = 1, position = "identity", alpha = 0.4)
# 6 - Plot 5, plus change mapping: cyl onto fill
ggplot(mtcars, aes(mpg, fill = cyl)) +
geom_histogram(binwidth = 1, position = "identity", alpha = 0.4)
economics
head(economics)
# Print out head of economics
head(economics)
# Plot unemploy as a function of date using a line plot
ggplot(economics, aes(x = date, y = unemploy)) + geom_line()
# Adjust plot to represent the fraction of total population that is unemployed
ggplot(economics, aes(x = date, y = unemploy/pop)) + geom_line()
# Plot unemploy as a function of date using a line plot
ggplot(economics, aes(x = date, y = unemploy)) + geom_line()
# Adjust plot to represent the fraction of total population that is unemployed
ggplot(economics, aes(x = date, y = unemploy/pop)) + geom_line()
recess
library(lubridate)
recess
data(recess)
